## Polly
> 失败重试机制提升服务可用性

#### Polly 组件包
+ Polly
+ Polly.Extensions.Http
+ Micrsoft.Extensions.Http.Polly

#### Polly 的能力
+ 失败重试
> 当服务调用失败时，自动重试
+ 服务熔断
> 当部分服务不可用时，我们的服务可以快速的相应一个熔断的结果,
> 避免持续不断的去请求这些不可用的服务而导致整个应用程序崩溃
> 
+ 超时处理
> 微服务的请求设置一个超时时间，当超超时时间时可以按照我们预定的时间处理,
  > 比如说返回一个缓存的结果
+ 舱壁隔离
> 实际上是一个限流的功能，我们可以为服务定义最大的流量和队列，
  > 避免服务因为请求量过来而崩溃
+ 缓存策略
> 可以使我们类似于AOP的方式为应用嵌入缓存的机制，当服务崩溃时可以让我们快速的
  > 请求缓存而不是继续请求服务
+ 失败降级
> 当我们的服务不可用时我们可以相应一个更友好的结果而不是报错
+ 组合策略
> 将上述的策略组合在一起

#### Polly使用步骤
+ 定义要使用的步骤或者返回类型
+ 定义要处理的动作（重试，熔断等）
+ 使用定义策略来执行代码

#### 适合失败重试的场景
+ 服务失败是暂时的，可自愈的
+ 服务是幂等的，重复调用不会有副作用

#### 最佳实践
+ 设置失败重试次数
+ 设置等待间隔
+ 设置降级响应
+ 设置断路器

#### 策略类型
+ 别动策略（异常处理，结果处理）
+ 主动策略（超时处理，断路器，舱壁隔离，缓存）




